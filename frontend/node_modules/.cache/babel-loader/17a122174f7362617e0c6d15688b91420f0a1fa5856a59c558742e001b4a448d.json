{"ast":null,"code":"var _jsxFileName = \"/home/munen/multi_bs_project/frontend1/src/components/SalesRegister.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { TextField, Card, CardContent, List, ListItem, Button, Typography } from \"@mui/material\";\nimport { motion } from \"framer-motion\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SalesRegister = () => {\n  _s();\n  const [search, setSearch] = useState(\"\");\n  const [products, setProducts] = useState([]);\n  const [lowStock, setLowStock] = useState([]);\n  useEffect(() => {\n    fetchProducts();\n    fetchLowStock();\n  }, []);\n\n  // Fetch stock products\n  const fetchProducts = async () => {\n    try {\n      const res = await fetch(\"http://localhost:8000/shop/stock\");\n      const data = await res.json();\n      setProducts(data.stock); // Access \"stock\" key from API response\n    } catch (error) {\n      console.error(\"Error fetching products:\", error);\n    }\n  };\n\n  // Fetch low-stock alerts\n  const fetchLowStock = async () => {\n    try {\n      const res = await fetch(\"http://localhost:8000/shop/stock/low\");\n      const data = await res.json();\n      setLowStock(data.low_stock_items); // Access \"low_stock_items\" key from API response\n    } catch (error) {\n      console.error(\"Error fetching low stock:\", error);\n    }\n  };\n\n  // Handle sale registration\n  const handleSale = async (productName, quantity = 1) => {\n    try {\n      const res = await fetch(`http://localhost:8000/shop/stock/update?name=${productName}&quantity_sold=${quantity}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      const data = await res.json();\n      alert(data.message);\n      fetchProducts();\n      fetchLowStock();\n    } catch (error) {\n      console.error(\"Error registering sale:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Card, {\n    component: motion.div,\n    whileHover: {\n      scale: 1.02\n    },\n    sx: {\n      p: 2,\n      maxWidth: 600,\n      mx: \"auto\"\n    },\n    children: /*#__PURE__*/_jsxDEV(CardContent, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        sx: {\n          mb: 2\n        },\n        children: \"Retail Shop Sales\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Search Product\",\n        variant: \"outlined\",\n        fullWidth: true,\n        value: search,\n        onChange: e => setSearch(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), search && /*#__PURE__*/_jsxDEV(List, {\n        children: products.filter(p => p.name.toLowerCase().includes(search.toLowerCase())).map((p, index) => /*#__PURE__*/_jsxDEV(ListItem, {\n          button: true,\n          onClick: () => handleSale(p.name),\n          children: [p.name, \" - \", p.quantity, \" left\"]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this), lowStock.length > 0 && /*#__PURE__*/_jsxDEV(Card, {\n        sx: {\n          mt: 3,\n          bgcolor: \"red\",\n          color: \"white\",\n          p: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          children: \"\\u26A0\\uFE0F Low Stock Products\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(List, {\n          children: lowStock.map((p, index) => /*#__PURE__*/_jsxDEV(ListItem, {\n            children: [p.name, \" - \", p.current_stock, \" left\"]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(SalesRegister, \"ABNBz6a5aBFz5ZLEdykbMFs+ceA=\");\n_c = SalesRegister;\nexport default SalesRegister;\nvar _c;\n$RefreshReg$(_c, \"SalesRegister\");","map":{"version":3,"names":["React","useState","useEffect","TextField","Card","CardContent","List","ListItem","Button","Typography","motion","jsxDEV","_jsxDEV","SalesRegister","_s","search","setSearch","products","setProducts","lowStock","setLowStock","fetchProducts","fetchLowStock","res","fetch","data","json","stock","error","console","low_stock_items","handleSale","productName","quantity","method","headers","alert","message","component","div","whileHover","scale","sx","p","maxWidth","mx","children","variant","mb","fileName","_jsxFileName","lineNumber","columnNumber","label","fullWidth","value","onChange","e","target","filter","name","toLowerCase","includes","map","index","button","onClick","length","mt","bgcolor","color","current_stock","_c","$RefreshReg$"],"sources":["/home/munen/multi_bs_project/frontend1/src/components/SalesRegister.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { TextField, Card, CardContent, List, ListItem, Button, Typography } from \"@mui/material\";\nimport { motion } from \"framer-motion\";\n\nconst SalesRegister = () => {\n  const [search, setSearch] = useState(\"\");\n  const [products, setProducts] = useState([]);\n  const [lowStock, setLowStock] = useState([]);\n\n  useEffect(() => {\n    fetchProducts();\n    fetchLowStock();\n  }, []);\n\n  // Fetch stock products\n  const fetchProducts = async () => {\n    try {\n      const res = await fetch(\"http://localhost:8000/shop/stock\");\n      const data = await res.json();\n      setProducts(data.stock); // Access \"stock\" key from API response\n    } catch (error) {\n      console.error(\"Error fetching products:\", error);\n    }\n  };\n\n  // Fetch low-stock alerts\n  const fetchLowStock = async () => {\n    try {\n      const res = await fetch(\"http://localhost:8000/shop/stock/low\");\n      const data = await res.json();\n      setLowStock(data.low_stock_items); // Access \"low_stock_items\" key from API response\n    } catch (error) {\n      console.error(\"Error fetching low stock:\", error);\n    }\n  };\n\n  // Handle sale registration\n  const handleSale = async (productName, quantity = 1) => {\n    try {\n      const res = await fetch(`http://localhost:8000/shop/stock/update?name=${productName}&quantity_sold=${quantity}`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n      });\n\n      const data = await res.json();\n      alert(data.message);\n      fetchProducts();\n      fetchLowStock();\n    } catch (error) {\n      console.error(\"Error registering sale:\", error);\n    }\n  };\n\n  return (\n    <Card component={motion.div} whileHover={{ scale: 1.02 }} sx={{ p: 2, maxWidth: 600, mx: \"auto\" }}>\n      <CardContent>\n        <Typography variant=\"h5\" sx={{ mb: 2 }}>Retail Shop Sales</Typography>\n\n        {/* Search Bar */}\n        <TextField\n          label=\"Search Product\"\n          variant=\"outlined\"\n          fullWidth\n          value={search}\n          onChange={(e) => setSearch(e.target.value)}\n        />\n\n        {/* Product Suggestions */}\n        {search && (\n          <List>\n            {products\n              .filter(p => p.name.toLowerCase().includes(search.toLowerCase()))\n              .map((p, index) => (\n                <ListItem key={index} button onClick={() => handleSale(p.name)}>\n                  {p.name} - {p.quantity} left\n                </ListItem>\n              ))}\n          </List>\n        )}\n\n        {/* Low Stock Alerts */}\n        {lowStock.length > 0 && (\n          <Card sx={{ mt: 3, bgcolor: \"red\", color: \"white\", p: 2 }}>\n            <Typography variant=\"h6\">⚠️ Low Stock Products</Typography>\n            <List>\n              {lowStock.map((p, index) => (\n                <ListItem key={index}>{p.name} - {p.current_stock} left</ListItem>\n              ))}\n            </List>\n          </Card>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default SalesRegister;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}